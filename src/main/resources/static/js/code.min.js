var testEditor;$((function(){testEditor=editormd.markdownToHTML("doc-content",{htmlDecode:"style,script,iframe",emoji:!0,taskList:!0,toc:!0,tocDropdown:!1,tocContainer:"#toc-content",tex:!0,flowChart:!0,sequenceDiagram:!0,codeFold:!0})})),$((function(){$("pre").wrap('<div class="code-area" style="position: relative"></div>');var $code_expand=$('<i class="fas fa-angle-double-up code-expand" title="代码折叠" aria-hidden="true"></i>');$(".code-area").prepend($code_expand),$(".code-expand").on("click",(function(){$(this).parent().hasClass("code-closed")?($(this).siblings("pre").find("code").show(500),$(this).parent().removeClass("code-closed")):($(this).siblings("pre").find("code").hide(500),$(this).parent().addClass("code-closed"))}))})),$((function(){var $copyIcon=$('<i class="fas fa-copy code_copy" title="复制代码" aria-hidden="true"></i>'),$notice=$('<div class="codecopy_notice"></div>');function copy(text,ctx){if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{document.execCommand("copy"),$(ctx).prev(".codecopy_notice").text("复制成功").animate({opacity:1,top:30},450,(function(){setTimeout((function(){$(ctx).prev(".codecopy_notice").animate({opacity:0,top:0},650)}),400)}))}catch(ex){return $(ctx).prev(".codecopy_notice").text("复制失败").animate({opacity:1,top:30},650,(function(){setTimeout((function(){$(ctx).prev(".codecopy_notice").animate({opacity:0,top:0},650)}),400)})),!1}else $(ctx).prev(".codecopy_notice").text("浏览器不支持复制")}$(".code-area").prepend($copyIcon),$(".code-area").prepend($notice),$(".code-area .fa-copy").on("click",(function(){var selection=window.getSelection(),range=document.createRange(),text;range.selectNodeContents($(this).siblings("pre").find("ol")[0]),selection.removeAllRanges(),selection.addRange(range),copy(selection.toString(),this),selection.removeAllRanges()}))})),setTimeout((function(){$("#articleContent img").each((function(){let imgPath=$(this).attr("src");$(this).wrap('<div class="img-item"></div>'),$(this).addClass("lazyload img-shadow img-margin")}))}),100),setTimeout((function(){$(".menu-V .toggle").click()}),2200),$(".navbar-fixed").headroom();let $tocWidget=$(".toc-widget");$(window).scroll((function(){let scroll;$(window).scrollTop()>430?$tocWidget.addClass("toc-fixed"):$tocWidget.removeClass("toc-fixed")}));let fixPostCardWidth=function(srcId,targetId){let srcDiv=$("#"+srcId);if(0===srcDiv.length)return;let w=srcDiv.width();w+=w>=450?21:w>=350&&w<450?18:w>=300&&w<350?16:14,$("#"+targetId).width(w)};const expandedClass="expanded";let $tocAside=$("#toc-aside"),$mainContent=$("#main-content");$("#floating-toc-btn").click((function(){$tocAside.hasClass("expanded")?($tocAside.removeClass("expanded").hide(),$mainContent.removeClass("l9")):($tocAside.addClass("expanded").show(),$mainContent.addClass("l9")),fixPostCardWidth("artDetail","prenext-posts")}));